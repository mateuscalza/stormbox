<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Autocomplete Example</title>
    <meta name="description" content="ES7 Autocomplete Example">
    <meta name="author" content="Inovadora Sistemas">
    <link rel="stylesheet" href="/example/style.css" media="screen" title="no title" charset="utf-8">
</head>

<body>
    <h1>ES7 AutoComplete</h1>
    <form action="/" method="post">
        <fieldset>
            <legend>References</legend>
            <p>Fields that follow as param to sources.</p>
            <input id="city" name="city" placeholder="City">
        </fieldset>

        <fieldset>
            <legend>AutoComplete</legend>
            <p>The <b>ultra super hyper mega</b> autocomplete.</p>
            <input id="user_id" name="user_id" type="hidden">
            <input id="text_user_id" name="text_user_id" type="text" value="Meu Usuário Salvo da Silva Pereira Buscapé de Tal">
        </fieldset>

        <fieldset>
            <legend>Other Fields</legend>
            <p>Fields that will receive value from autocomplete response.</p>
            <label>
                <p>Age</p>
                <input id="age" name="age" placeholder="Age">
            </label>
            <label>
                <p>Occupation</p>
                <input id="occupation" name="occupation" placeholder="Occupation" type="hidden">
                <input id="text_occupation" name="text_occupation" placeholder="Occupation"type="text">
            </label>
        </fieldset>

        <input type="submit" value="Store">
    </form>

    <script src="/dist/index.js"></script>
    <script>

        // autocomplete.byId('text_user_id').addEventListener('blur', function(event){
        //     console.log('text blur working', event.target.value);
        // });
        // autocomplete.byId('text_user_id').addEventListener('change', function(event){
        //     console.log('text change working', event.target.value);
        // });
        //
        // autocomplete.byId('user_id').addEventListener('blur', function(event){
        //     console.log('value blur working', event.target.value);
        // });
        // autocomplete.byId('user_id').addEventListener('change', function(event){
        //     console.log('value change working', event.target.value);
        // });

        var userAc = new AutoComplete({
            hiddenInput: AutoComplete.byId('user_id'),
            textInput: AutoComplete.byId('text_user_id'),
            source: new AutoComplete.sources.AjaxSource('/example/source.json'),
            messages: {
                emptyItemName: 'Nenhum',
                searchPlaceholder: 'Digite para buscar...'
            },
            references: {
                city: AutoComplete.byId('city')
            }
        });

        new AutoComplete({
            hiddenInput: AutoComplete.byId('occupation'),
            textInput: AutoComplete.byId('text_occupation'),
            source: new AutoComplete.sources.ArraySource([])
        });

    </script>
    <script src="https://use.fontawesome.com/b8f550cebc.js"></script>
    <script id="__bs_script__">
    //<![CDATA[
        document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.2.13.0.js'><\/script>".replace("HOST", location.hostname));
    //]]>
    </script>
</body>
</html>
